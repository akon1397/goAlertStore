# Alert Store API

The Alert Store API is a RESTful web service for storing and retrieving alert data written in Go. It allows you to create and retrieve alerts in a data storage system.

## Table of Contents

- [Introduction](#introduction)
- [Features](#features)
- [Getting Started](#getting-started)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Usage](#usage)
- [API Endpoints](#api-endpoints)


## Introduction

The Alert Store API is a part of an alert management system designed to handle various types of alerts generated by different services and applications. It offers RESTful endpoints for creating and retrieving alerts by service ID and timestamp range.

## Features

- Create alerts with details such as alert ID, service ID, service name, model, alert type, timestamp, severity, and team Slack channel.
- Retrieve alerts based on service ID and a specified time range.
- Store alerts in a database for easy retrieval.
- Suitable error messages for all possible scenarios

## Getting Started

Follow these instructions to set up and run the Alert Store API on your local machine.

### Prerequisites

- Go 1.15 or later
- SQLite3 or another database system (as per your configuration)

### Installation

1. Clone the repository:
   ```bash
   git clone https://github.com/akon1397/goAlertStore.git
2. Change to the project directory:
```
cd goAlertStore
```

3. Build and run the application:
```
go build
./goAlertStore
```

The API should now be running at http://localhost:8080.

4. Testing the application
```
cd tests
go test
```

### Usage
To use the API, you can make HTTP requests to its endpoints. You can use tools like curl or Postman or integrate it with your own applications.

### Using DOCKER
- Build the Docker image using the docker build command.
```bash
docker build -t goAlertStore:latest .
```
- Once the image is built successfully, you can run the container using the docker run command:
```bash
docker run -p 8080:8080 go_alert_store:latest
```
It should now be running in a Docker container. You can access it at http://localhost:8080 on your host machine.

### API Endpoints
#### POST /alerts: Create a new alert.
Write Request -
HTTP Method: POST
Endpoint: /alerts
Request Body:
```
{
"alert_id": "b950482e9911ec7e41f7ca5e5d9a424f",
"service_id": "my_test_service_id",
"service_name": "my_test_service",
"model": "my_test_model",
"alert_type": "anomaly",
"alert_ts": "1695644160",
"severity": "warning",
"team_slack": "slack_ch"
}
```
Write Response-

Success
HTTP Status Code: 200 OK
Response Body:
```
{
"alert_id": "b950482e9911ec7e41f7ca5e5d9a424f",
"error": ""
}
```
Error
HTTP Status Code: 500 Internal Server Error
Response Body:
```
{
"alert_id": "b950482e9911ec7e41f7ca5e5d9a424f",
"error": "<error details>"
}
```

#### GET /alerts: Retrieve alerts by service ID and time range.
Read Request
HTTP Method: GET
Endpoint: /alerts
Query Parameters:
- service_id: The identifier of the service for which alerts are requested.
- start_ts: The starting timestamp epoch of the time period.
- end_ts: The ending timestamp epoch of the time period.

Example: /alerts?
service_id=my_test_service_id&start_ts=1695643160&end_ts=1695644360

Read Response
Success
HTTP Status Code: 200 OK
Response Body:
```
{
"service_id" : "my_test_service_id"
"service_name": "my_test_service",
"alerts" : [
{
"alert_id": "b950482e9911ec7e41f7ca5e5d9a424f",
"model": "my_test_model",
"alert_type": "anomaly",
"alert_ts": "1695644060",
"severity": "warning",
"team_slack": "slack_ch"
},
{
"alert_id": "b950482e9911ecsdfs41f75e5d9az23cv",
"model": "my_test_model",
"alert_type": "anomaly",
"alert_ts": "1695644160",
"severity": "warning",
"team_slack": "slack_ch"
},
]
}
```

Error
HTTP Status Code: Appropriate HTTP error status (e.g., 400 Bad Request, 404 Not Found, 500 Internal
Server Error)
Response Body:
```
{
"alert_id": "",
"error": "<error details>"
}
```